-- board_table
BEGIN
   EXECUTE IMMEDIATE 'DROP TABLE board_table CASCADE CONSTRAINTS';
EXCEPTION
   WHEN OTHERS THEN
      IF SQLCODE != -942 THEN RAISE; END IF;
END;
/

CREATE TABLE board_table (
   id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
   boardTitle VARCHAR2(50),
   boardWriter VARCHAR2(20),
   boardPass VARCHAR2(20),
   boardContents VARCHAR2(500),
   boardHits NUMBER DEFAULT 0,
   createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
   fileAttached NUMBER DEFAULT 0
);

-- board_file_table
BEGIN
   EXECUTE IMMEDIATE 'DROP TABLE board_file_table CASCADE CONSTRAINTS';
EXCEPTION
   WHEN OTHERS THEN
      IF SQLCODE != -942 THEN RAISE; END IF;
END;
/

CREATE TABLE board_file_table (
   id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
   originalFileName VARCHAR2(100),
   storedFileName VARCHAR2(100),
   boardId NUMBER,
   CONSTRAINT fk_board_file FOREIGN KEY (boardId) REFERENCES board_table (id) ON DELETE CASCADE
);
